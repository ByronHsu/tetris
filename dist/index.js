!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(){for(var e=0;e<20;e++)for(var t=0;t<12;t++)P[e][t]=0}function o(){e:for(var e=0;e<20;e++){for(var t=[],r=0;r<20;r++)for(var o=0;o<12;o++)_[r][o]=0;if(!P[e][0]&&N[e][0]){var a={x:0,y:e},l=N[e][0];for(t.push(a);0!=t.length;){var s=t[0];P[s.y][s.x]=1,_[s.y][s.x]=1,t.shift();for(var u=0;u<4;u++){var c=s.x+B[u],v=s.y+M[u];if(c>=0&&c<12&&v>=0&&v<20&&N[v][c]===l&&!P[v][c]){var d={x:c,y:v};t.push(d)}}}for(var y=0;y<20;y++)if(1===_[y][11]){for(var m=0;m<=11;m++)for(var h=0;h<=19;h++)1===_[h][m]&&(F++,N[h][m]=0);for(var g=0;g<20;g++)for(var x=0;x<12;x++)_[g][x]=0,P[g][x]=0;for(var p=0,k=19;k>=0;k--){for(var b=0;b<12;b++){for(var w=0;w<20;w++)for(var E=0;E<12;E++)_[w][E]=0;if(!P[k][b]&&0!=N[k][b]){var C=N[k][b],I=[],S={y:k,x:b};for(I.push(S);0!=I.length;){var j=I[0];P[j.y][j.x]=1,_[j.y][j.x]=N[j.y][j.x],I.shift();for(var A=0;A<4;A++){var O=j.x+B[A],L=j.y+M[A];if(O>=0&&O<12&&L>=0&&L<20&&N[L][O]===C&&!P[L][O]){var R={x:O,y:L};I.push(R)}}}var T=f();0!=T&&(p=T),i()}}0!==k||0==p||(p=0)}n();continue e}}}}function f(){for(var e=1e4,t=_.map(function(e){return e.slice()}),r=0;r<12;r++){for(var n=1e4,o=0,f=19;f>=0;f--)if(0!=_[f][r]){for(var i=f+1;i<=20;i++){if(20===i){n=i-f-1,o=1;break}if(0!=N[i][r]){n=i-f-1,o=1;break}}if(o)break}e=Math.min(e,n)}for(var a=0;a<e;a++)_.splice(19,1),_.unshift([0,0,0,0,0,0,0,0,0,0,0,0]);for(var l=0;l<20;l++)for(var s=0;s<12;s++)0!=t[l][s]&&(N[l][s]=0,P[l][s]=0);for(var u=0;u<20;u++)for(var c=0;c<12;c++)0!=_[u][c]&&(N[u][c]=_[u][c],P[u][c]=1);return e}function i(){document.getElementById("score").innerHTML=""+10*F,b.fillStyle="#202028",b.fillRect(0,0,24,40);for(var e=0;e<N.length;e++)for(var t=0;t<N[e].length;t++)0!=N[e][t]&&(b.beginPath(),b.lineWidth="0.1",b.strokeStyle="black",b.rect(t,e,1,1),b.stroke(),b.fillStyle=w[N[e][t]],b.fillRect(t,e,1,1))}function a(e){for(var t=e.matrix,r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)0!=t[r][n]&&(b.beginPath(),b.lineWidth="0.1",b.strokeStyle="black",b.rect(n+e.offset.x,r+e.offset.y,1,1),b.stroke(),b.fillStyle=w[t[r][n]],b.fillRect(n+e.offset.x,r+e.offset.y,1,1))}function l(){for(;;)if(I.offset.y++,c(N,I)){if(I.offset.y--,c(N,I))return void(C=1);y(N,I),n(),o(),h();break}S=0}function s(){if(I.offset.y++,c(N,I)){if(I.offset.y--,c(N,I))return void(C=1);y(N,I),n(),o(),h()}S=0}function u(e){I.offset.x+=e,c(N,I)&&(I.offset.x-=e)}function c(e,t){for(var r=t.matrix,n=t.offset,o=0;o<r.length;++o)for(var f=0;f<r[o].length;++f)if(0!==r[o][f]&&0!==(e[o+n.y]&&e[o+n.y][f+n.x]))return!0;return!1}function v(e){var t=I.offset.x,r=1;for(d(e,I);c(N,I);)if(I.offset.x+=r,(r=-(r+(r>0?1:-1)))>I.matrix[0].length)return d(-e,I),void(I.offset.x=t);for(t=I.offset.y,r=1;c(N,I);)if(I.offset.y+=r,(r=-(r+(r>0?1:-1)))>I.matrix[0].length)return d(-e,I),void(I.offset.y=t)}function d(e,t){for(var r=t.matrix,n=r.map(function(e){return e.slice()}),o=0;o<r.length;o++)for(var f=0;f<r[o].length;f++)n[f][o]=r[o][f];if(1===e)for(var i=0;i<r.length;i++)for(var a=0;a<Math.floor(r[i].length/2);a++){var l=[n[i][r[i].length-a-1],n[i][a]];n[i][a]=l[0],n[i][r[i].length-a-1]=l[1]}else for(var s=0;s<Math.floor(r.length/2);s++)for(var u=0;u<r[s].length;u++){var c=[n[r.length-s-1][u],n[s][u]];n[s][u]=c[0],n[r.length-s-1][u]=c[1]}t.matrix=n}function y(e,t){for(var r=t.matrix,n=0;n<r.length;n++)for(var o=0;o<r[n].length;o++)0!=r[n][o]&&(e[n+t.offset.y][o+t.offset.x]=r[n][o])}function m(){C=0,S=0,F=0;for(var e=0;e<20;e++)for(var t=0;t<12;t++)N[e][t]=0,P[e][t]=0,_[e][t]=0;h(),g()}function h(){I={type:Math.floor(7*Math.random())},I.matrix=E[I.type];for(var e=0;e<I.matrix.length;e++)for(var t=0;t<I.matrix.length;t++)0!=I.matrix[e][t]&&(I.matrix[e][t]=Math.floor(2*Math.random()+1));var r=11-I.matrix.length;I.offset={x:Math.floor(Math.random()*r),y:0}}function g(){if(S++,40==S&&(s(),S=0),1===C)return void console.log(p.UserName+" "+F);i(),a(I),window.requestAnimationFrame(g)}function x(){for(var e=0;e<20;e++){N.push([]),P.push([]),_.push([]);for(var t=0;t<12;t++)N[e].push(0),P[e].push(0),_[e].push(0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.gameStart=t.gameInit=void 0;var p=r(1),k=document.getElementById("tetris"),b=k.getContext("2d"),w=[null,"#F27557","#84E9D8","#DAFD79"],E=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[1,1],[1,1]],[[0,0,0],[1,1,1],[0,1,0]],[[1,0,0],[1,1,1],[0,0,0]],[[0,0,1],[1,1,1],[0,0,0]],[[0,1,1],[1,1,0],[0,0,0]],[[1,1,0],[0,1,1],[0,0,0]]],B=[1,0,-1,0],M=[0,1,0,-1];document.addEventListener("keydown",function(e){39===e.keyCode?u(1):37===e.keyCode?u(-1):40===e.keyCode?s():38===e.keyCode||90===e.keyCode?v(1):88===e.keyCode?v(-1):32===e.keyCode&&l()});var C=void 0,I=void 0,S=void 0,F=void 0,N=[],P=[],_=[];t.gameInit=x,t.gameStart=m},function(e,t,r){"use strict";function n(e){"connected"===e.status?o():f()}function o(){window.FB.api("/me",function(e){t.UserName=i=e.name,document.getElementsByClassName("fb-login-button")[0].style.display="none",document.getElementById("hello").style.display="inline-block",document.getElementById("hello").innerHTML="Hello "+e.name})}function f(){document.getElementsByClassName("fb-login-button")[0].style.display="inline-block"}Object.defineProperty(t,"__esModule",{value:!0}),window.fbAsyncInit=function(){window.FB.init({appId:"1945913712308994",cookie:!0,xfbml:!0,version:"v2.9"}),document.getElementById("hello").style.display="none",window.FB.AppEvents.logPageView(),window.FB.Event.subscribe("auth.statusChange",n)},function(e,t,r){var n,o=e.getElementsByTagName(t)[0];e.getElementById(r)||(n=e.createElement(t),n.id=r,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk");var i=void 0;t.UserName=i},function(e,t,r){"use strict";function n(){i.fillStyle="black",i.fillRect(0,0,24,40),i.font="0.8px Arial",i.fillStyle="white",i.fillText("press enter to continue...",1.6,10)}var o=r(0),f=document.getElementById("tetris"),i=f.getContext("2d");i.scale(20,20),n(),(0,o.gameInit)();var a=0;document.addEventListener("keydown",function(e){13!==e.keyCode||a||(a=1,(0,o.gameStart)(),n(),a=0)})}]);